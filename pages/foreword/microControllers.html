
    <h1 class="contentCenter mainText">Микроконтроллеры</h1>
    <p>
        В этом параграфе мы продолжим говорить об аппаратных 
        компонентах встроенных систем, а именно о микроконтроллерах.
        Микроконтроллер является центром встроенной системы, 
        поэтому в этом учебной пособии мы уделим много внимания именно 
        работе с ним. На Рис. 2 вы видите одну из плат Arduino. Это не 
        микроконтроллер, это печатная плата с множеством элементов, 
        среди которых, присмотревшись, вы сможете увидеть большую 
        черную прямоугольную микросхему. Вот это как раз и есть 
        микроконтроллер, который выполняет программы, управляющие
        устройством. 
    </p>
    <p class="contentCenter pImage">
        <img class="img" src="../source/img/image2.png" alt="image">
    </p>
    <p class="contentCenter pImage">
        Рис. 2: Плата Arduino
    </p>
    <p>
        Итак, работа данной микросхемы состоит в том, чтобы выполнять 
        код, и это центр всей системы. Он считывает данные из других 
        компонентов, и он также управляет другими компонентами. Чем 
        отличается микроконтроллер от микропроцессора, который 
        используется в обычных компьютерах? Микроконтроллер обычно 
        меньше и слабее, чем микропроцессор, поэтому, когда говорят о 
        последнем, то имеют в виду микросхему от компании Intel или AMD, 
        устанавливаемую в настольный компьютер или ноутбук, и которая 
        работает на очень большой скорости.
    </p>
    <p>
        Микроконтроллер же, как правило, существенно более слабый. 
        При этом с точки зрения функционирования он делает примерно то 
        же самое, но только во встроенных системах. С этим связаны и 
        ограничения. Все компоненты встроенных систем должны быть 
        энергоэффективными и дешевыми и для них, чаще всего, не 
        требуется производительность как у процессора с 6 ядрами и 
        частотой 4 ГГц. Если нужно реализовать конкретное взаимодействие с пользователем, то такая производительность скорее всего и не 
        требуется, поэтому для встроенных систем обычно нужен дешевый 
        процессор, потребляющий мало энергии.
    </p>
    <p>
        Какова производительность микроконтроллеров в абсолютном 
        выражении? Сейчас достаточно часто используется частота от 16 
        MHz, хотя может быть даже и меньше, например, 8 или даже 4 MHz. 
        Это почти в несколько сот раз медленней, чем процессор обычного 
        компьютера. Конечно, могут применять и более быстрые 
        микросхемы – до 500 MHz или даже до 1 GHz. Это требуется, 
        например, для обработки видеоизображений.
    </p>
    <p>
        Другое отличие от обычных компьютеров состоит в том, что в 
        обычных компьютерах процессор и память – это отдельные 
        микросхемы, причем обычно память представляет собой несколько 
        микросхем. Мы можем менять и добавлять память независимо от 
        процессора. В микроконтроллерах начального уровня все
        объединено в одну микросхему, то есть по своей сути такой 
        микроконтроллер – это мини-компьютер, сделанный на одной 
        микросхеме, на которой находится и микропроцессор, и память, и 
        другие необходимые компоненты. Конечно же, памяти у них тоже 
        гораздо меньше, чем в настольных компьютерах, но такой вариант
        может быть удобен, так как нужно только минимальное количество 
        внешних компонентов, чтобы микропроцессор мог работать. В самых 
        простых случаях требуется только питание.
    </p>
    <p>
        В более производительных микроконтроллерах используют 
        внешнюю память, которая устанавливается отдельно. Это менее 
        удобно, но зато позволяет выбрать, сколько памяти нам нужно, не 
        переплачивая за не нужный в конкретном устройстве ее объем. 
        Обычно так делают, когда микроконтроллеру для работы требуется 
        достаточно большой объем памяти.
        Итак, микроконтроллер – это интегрированная микросхема, 
        которая выполняет программу. На Рис. 3 микроконтроллер 
        выглядит немного по-другому, чем то, что мы видели раньше. На 
        этом рисунке мы заглянули внутрь черной оболочки и увидели то, 
        как на самом деле выглядит микросхема. Это маленький кремниевый 
        чип, спрятанный в защитный корпус.
        Фотография на Рис. 3 показывает микропроцессор после того, 
        как чип был установлен в корпус.
    </p>
    <p class="contentCenter pImage">
        <img class="img" src="../source/img/image3.png" alt="image">
    </p>
    <p class="contentCenter pImage">
        Рис. 3: Микроконтроллер
    </p>
    <p>
        Сам корпус представляет собой черный материал, который 
        окружает чип. Он нужен, прежде всего, для защиты, а кроме того, для 
        охлаждения микросхемы, так как помогает более эффективно 
        отводить тепло. Это необходимо, потому что все чипы сильно 
        нагреваются во время работы. Настолько сильно, что если вы 
        попробуете коснуться открытого чипа во время его работы, то 
        получите такие же ощущения, как и от раскаленной лампочки (по 
        количеству выделяемого тепла современные процессоры можно 
        сравнить с обычными 100 ватными лампочками).
    </p>
    <p>
        Кроме того, вы видите, что по всему периметру чипа находятся 
        контактные площадки. Это то, посредством чего микросхема 
        общается с внешним миром. Они соединены проволочками с чипом 
        и выведены на маленькие кусочки металла на внешней стороне 
        корпуса, так чтобы можно было припаять микроконтроллер 
        к остальным компонентам системы.
    </p>
    <p>
        Обычно микроконтроллер ставится на печатную плату, медные 
        дорожки которой соединяют его с другими компонентами системы. 
        Данная микросхема является центром системы, она посылает 
        команды другим компонентам и получает от них данные. Чтобы она
        могла обработать эти данные, ее нужно запрограммировать. 
        В отличие от ППВМ, аппаратную архитектуру микропроцессора 
        менять нельзя. Зато в его память можно загрузить программу в виде 
        набора инструкций, написанных на понятном ему языке, и попросить 
        его ее выполнить.
    </p>
    <p>
        Существует много языков программирования, на которых можно 
        писать подобные программы. В рамках этого учебного пособия мы 
        будем использовать язык Си для программирования
        микроконтроллера, установленный на плате Arduino (Рис. 2). 
        Кроме Си используют и другие языки. Прежде чем выполнить,
        программу, очевидно, надо где-то сохранить. Следовательно, внутри 
        микроконтроллера должна быть память для программы. Сейчас это, 
        как правило, флэш-память, такая же, как в USB накопителях.
        Флэш-память – это энергонезависимая память, то есть такая, из 
        которой данные не стирается после отключения питания. Когда 
        питание появляется вновь, микроконтроллер начинает выполнение 
        программы с самого начала.
    </p>
    <p>
        Где, на чем и как пишут программы для подобных устройств?
        Обычно это делают на обычном ноутбуке или настольном 
        компьютере. Это связано с тем, что как уже упомянуто ранее, 
        микроконтроллеры сравнительно медленные и слабые. Поэтому 
        программу пишут и компилируют на мощном компьютере, а затем 
        окончательная версия скомпилированной программы должна быть 
        записана в память микроконтроллера. Делается это с помощью 
        специального устройства, называемого программатором (Рис. 4).
    </p>
    <p class="contentCenter pImage">
        <img class="img" src="../source/img/image4.png" alt="image">
    </p>
    <p class="contentCenter pImage">
        Рис. 4: Программатор
    </p>
    <p>
        Это небольшая плата, которая с помощью USB присоединяется 
        к компьютеру, а к расположенному на ней слоту подключается 
        микроконтроллер. Есть специальные программы на компьютере, 
        которые связываются с этим устройством и записывают через него 
        программу. Это один из способов запрограммировать 
        микроконтроллер. С таким программатором микроконтроллер 
        программируют отдельно, а потом уже устанавливают в систему, где 
        он будет работать. Иногда бывает так, что в устройстве уже 
        предусмотрен специальный разъем, и тогда микроконтроллер 
        программируют прямо в системе. Но в нашем случае мы не будем так 
        делать, потому что мы используем Arduino. Для нее не нужен 
        отдельный программатор, так как он уже встроен в плату. Можно 
        просто взять Arduino и, подключив ее к USB порту ноутбука или 
        настольного ПК, программировать ее непосредственно.
    </p>